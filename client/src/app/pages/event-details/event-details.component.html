<div class="p-4">
  <h2 class="text-2xl font-bold mb-4">{{ eventId ? 'Edit Event' : 'Create Event' }}</h2>

  <div *ngIf="error" class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded">
    {{ error }}
  </div>

  <div *ngIf="loading" class="text-center py-4">
    <p>Loading...</p>
  </div>

  <form [formGroup]="eventForm" (ngSubmit)="saveEvent()" *ngIf="!loading" class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Name *
      </label>
      <input 
        type="text" 
        formControlName="name" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
      />
      <span *ngIf="eventForm.get('name')?.invalid && eventForm.get('name')?.touched" class="text-red-500 text-sm">
        Name is required
      </span>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Description *
      </label>
      <textarea 
        formControlName="description" 
        rows="4"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
      ></textarea>
      <span *ngIf="eventForm.get('description')?.invalid && eventForm.get('description')?.touched" class="text-red-500 text-sm">
        Description is required
      </span>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Start Date & Time *
      </label>
      <input 
        type="datetime-local" 
        formControlName="startDatetime" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
      />
      <span *ngIf="eventForm.get('startDatetime')?.invalid && eventForm.get('startDatetime')?.touched" class="text-red-500 text-sm">
        Start date & time is required
      </span>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        End Date & Time
      </label>
      <input 
        type="datetime-local" 
        formControlName="endDatetime" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
      />
    </div>

    <div class="flex gap-2">
      <button 
        type="submit" 
        class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"
      >
        Save
      </button>
      <button 
        type="button" 
        (click)="cancel()" 
        class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"
      >
        Cancel
      </button>
    </div>
  </form>

  <div *ngIf="event$ | async as event" class="mt-4 p-4 border border-gray-200 rounded">
    <h3 class="text-lg font-semibold mb-2">Event Details</h3>
    <p><strong>Name:</strong> {{ event.name }}</p>
    <p><strong>Description:</strong> {{ event.description }}</p>
    <p><strong>Start:</strong> {{ event.startDatetime | date:'medium' }}</p>
    <p *ngIf="event.endDatetime"><strong>End:</strong> {{ event.endDatetime | date:'medium' }}</p>
  </div>
</div>
